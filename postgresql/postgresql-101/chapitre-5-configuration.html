<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Chapitre 5 - Configuration - Arc
    
  </title>

  <meta name="description" content="On dénombre pas moins de 378 paramètres de configuration dans PostgreSQL 17, et ce nombre continue de croître à chaque nouvelle version. Nous aurons l’occasi...">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://ragaoua.github.io/postgresql/postgresql-101/chapitre-5-configuration.html">
  <link rel="alternate" type="application/rss+xml" title="Arc" href="/feed.xml">

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Arc</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Accueil</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">A propos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Articles</a>
        </li>
        <!--
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
        -->
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

  <header class="masthead">
    
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Chapitre 5 - Configuration</h1>
            
            <span class="meta">
              16-06-2025 &middot; <span class="reading-time" title="Estimated read time">
  
   16 mins </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <p>On dénombre pas moins de 378 paramètres de configuration dans PostgreSQL 17, et ce nombre continue de croître à chaque nouvelle version.<br />
Nous aurons l’occasion d’examiner une grande partie de ces paramètres tout au long de cette série d’articles. Aujourd’hui, nous allons aborder quelques généralités concernant la configuration de PostgreSQL.</p>

<p>Nous nous concentrerons ici sur les paramètres de configuration internes du serveur PostgreSQL, en excluant le paramétrage lié au contrôle d’accès et à l’authentification des utilisateurs, qui fera l’objet d’un article distinct.</p>

<h1 id="prologue--pg_settings">Prologue : pg_settings</h1>

<p>Tout cluster PostgreSQL possède un ensemble de “vues système” fournissant des informations sur le cluster, l’instance et leur état. Ces vues sont disponibles via le schéma <code class="language-plaintext highlighter-rouge">pg_catalog</code> présent dans chaque base de données du cluster.</p>

<p>Avant d’entrer dans le vif du sujet, nous allons nous intéresser à une vue système qui nous accompagnera tout au long de cet article. Cette vue, nommée <code class="language-plaintext highlighter-rouge">pg_settings</code>, fournit des informations relatives à la configuration du cluster :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">pg_catalog</span><span class="p">.</span><span class="n">pg_setting</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'port'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]---+-----------------------------------------------------
name            | port
setting         | 5432
unit            |
category        | Connections and Authentication / Connection Settings
short_desc      | Sets the TCP port the server listens on.
extra_desc      |
context         | postmaster
vartype         | integer
source          | default
min_val         | 1
max_val         | 65535
enumvals        |
boot_val        | 5432
reset_val       | 5432
sourcefile      |
sourceline      |
pending_restart | f
</code></pre></div></div>

<p>La vue nous renseigne sur la valeur actuelle du paramètre (<code class="language-plaintext highlighter-rouge">setting</code>), mais aussi sa valeur minimale et maximale lorsqu’il s’agit d’un nombre (<code class="language-plaintext highlighter-rouge">min_val</code>, <code class="language-plaintext highlighter-rouge">max_val</code>), ou les valeurs possibles lorsque celles-ci sont strictement limitées (<code class="language-plaintext highlighter-rouge">enumvals</code>). On dispose également de la valeur par défaut de chaque paramètre (<code class="language-plaintext highlighter-rouge">boot_val</code>), et de la valeur qu’il prendra s’il est réinitialisé (<code class="language-plaintext highlighter-rouge">reset_val</code>).</p>

<h1 id="sources-de-configuration">Sources de configuration</h1>

<p>La configuration d’un cluster PostgreSQL peut provenir de différentes sources, avec une hiérarchie entre celles-ci. Si un paramètre est défini à plusieurs endroits, c’est le niveau de configuration le plus spécifique qui prévaut.<br />
Notons que <code class="language-plaintext highlighter-rouge">pg_settings</code> présente le champ <code class="language-plaintext highlighter-rouge">source</code> qui indique la provenance d’un paramétrage.</p>

<p>Nous allons aborder ces canaux de configuration dans l’ordre croissant de leur spécificité, et donc de leur prévalence.</p>

<h2 id="la-configuration-par-défaut">La configuration par défaut</h2>

<p>Le paramétrage par défaut constitue bien évidemment la première source de configuration. À quelques exceptions près, tous les paramètres disposent d’une valeur par défaut. Par exemple, le paramètre <code class="language-plaintext highlighter-rouge">port</code>, s’il n’est spécifié nulle part, prend la valeur “5432”. Dans ce cas, le champ <code class="language-plaintext highlighter-rouge">source</code> de <code class="language-plaintext highlighter-rouge">pg_settings</code> affichera “default”.</p>

<h2 id="le-fichier-de-configuration-de-linstance">Le fichier de configuration de l’instance</h2>

<p>Un cluster PostgreSQL possède nécessairement un fichier de configuration. Le nom et l’emplacement de ce fichier ne peuvent être définis qu’au démarrage d’une instance, avec l’option <code class="language-plaintext highlighter-rouge">--config-file</code> des commandes <code class="language-plaintext highlighter-rouge">postgres</code> et <code class="language-plaintext highlighter-rouge">pg_ctl</code>. Traditionnellement, ce fichier est nommé <code class="language-plaintext highlighter-rouge">postgresql.conf</code> et placé à la racine du répertoire des données (<code class="language-plaintext highlighter-rouge">PGDATA</code>), ce qui correspond à la valeur par défaut du paramètre <code class="language-plaintext highlighter-rouge">config_file</code>.</p>

<p>Le fichier utilise un format “clé = valeur” pour définir la valeur de chaque paramètre. Il dispose d’une syntaxe permettant d’inclure d’autres fichiers et même des répertoires, ce qui permet de répartir la configuration sur plusieurs fichiers, mais le point d’entrée sera toujours le fichier pointé par <code class="language-plaintext highlighter-rouge">config_file</code>.</p>

<p>Ci-dessous, un exemple de fichier de configuration :</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>port = 5432
data_directory = '/var/lib/pgsql/data'
cluster_name = 'pg101'
config_file = '/var/lib/pgsql/data/postgresql.conf'
log_directory = '/var/log/postgresql'
log_filename = 'postgresql.log'

include './memoire.conf'
include_dir 'conf.d'
</code></pre></div></div>

<p>Attention : l’ordre d’inclusion des fichiers est important, car si un paramètre est défini à plusieurs endroits, seule la dernière valeur configurée est appliquée.</p>

<p>Au niveau de <code class="language-plaintext highlighter-rouge">pg_settings</code>, le champ <code class="language-plaintext highlighter-rouge">source</code> indiquera “configuration file”, et les champs <code class="language-plaintext highlighter-rouge">sourcefile</code> et <code class="language-plaintext highlighter-rouge">sourceline</code> seront renseignés pour identifier le fichier ainsi que la ligne configurant ce paramètre. Par exemple, si le <code class="language-plaintext highlighter-rouge">port</code> est défini dans le fichier de configuration :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span><span class="p">,</span> <span class="n">sourcefile</span><span class="p">,</span> <span class="n">sourceline</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'port'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]--------------------------------------
name       | port
setting    | 5433
source     | configuration file
sourcefile | /var/lib/pgsql/17/data/postgresql.conf
sourceline | 64
</code></pre></div></div>

<h2 id="la-commande-alter-system">La commande ALTER SYSTEM</h2>

<p>La commande <code class="language-plaintext highlighter-rouge">ALTER SYSTEM</code> est une commande interne à PostgreSQL qui permet de modifier le paramétrage d’un cluster. Elle nécessite une connexion à l’instance. Par exemple :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">SYSTEM</span> <span class="k">SET</span> <span class="n">cluster_name</span><span class="o">=</span><span class="s1">'postgresql101'</span><span class="p">;</span>
</code></pre></div></div>

<p>En interne, la commande manipule un fichier de configuration un peu particulier placé au niveau du <code class="language-plaintext highlighter-rouge">PGDATA</code> : <code class="language-plaintext highlighter-rouge">postgresql.auto.conf</code>. Ce fichier ne doit pas être modifié manuellement et sa gestion doit être exclusivement réservée à <code class="language-plaintext highlighter-rouge">ALTER SYSTEM</code>.</p>

<p>Du point de vue de <code class="language-plaintext highlighter-rouge">pg_settings</code>, <code class="language-plaintext highlighter-rouge">postgresql.auto.conf</code> est un simple fichier de configuration. La vue nous renverra donc des informations similaires pour les champs <code class="language-plaintext highlighter-rouge">source</code>, <code class="language-plaintext highlighter-rouge">sourcefile</code> et <code class="language-plaintext highlighter-rouge">sourceline</code> :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span><span class="p">,</span> <span class="n">sourcefile</span><span class="p">,</span> <span class="n">sourceline</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'cluster_name'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]-------------------------------------------
name       | cluster_name
setting    | postgresql101
source     | configuration file
sourcefile | /var/lib/pgsql/17/data/postgresql.auto.conf
sourceline | 4
</code></pre></div></div>

<h2 id="les-options-de-démarrage">Les options de démarrage</h2>

<p>Lors du démarrage d’une instance, il est possible de surcharger la configuration via l’option <code class="language-plaintext highlighter-rouge">--option</code> de <code class="language-plaintext highlighter-rouge">pg_ctl</code> ou l’option <code class="language-plaintext highlighter-rouge">-c</code> de <code class="language-plaintext highlighter-rouge">postgres</code>. Dans <code class="language-plaintext highlighter-rouge">pg_settings</code>, les paramètres ainsi définis auront pour <code class="language-plaintext highlighter-rouge">source</code> la valeur “command line”.</p>

<p>Par exemple, l’instance peut être démarrée avec l’une ou l’autre de ces deux commandes :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pg_ctl start <span class="nt">--option</span><span class="o">=</span><span class="s1">'-c port=5555'</span>
<span class="c"># Ou</span>
postgres <span class="nt">-c</span> <span class="nv">port</span><span class="o">=</span>5555
</code></pre></div></div>

<p>Dans ce cas, si on interroge <code class="language-plaintext highlighter-rouge">pg_settings</code> :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'port'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]---------
name    | port
setting | 5555
source  | command line
</code></pre></div></div>

<p>La valeur des paramètres définis par cette méthode est éphémère. Si l’instance est arrêtée et que le paramètre n’est pas de nouveau explicitement fourni dans la prochaine commande de démarrage, il reprendra sa valeur initiale (celle par défaut ou celle définie dans les fichiers de configuration). Notons que lors d’un redémarrage avec <code class="language-plaintext highlighter-rouge">pg_ctl restart</code>, les options de démarrage sont conservées.</p>

<h2 id="la-configuration-par-base-de-données-avec-alter-database">La configuration par base de données avec ALTER DATABASE</h2>

<p>La commande <code class="language-plaintext highlighter-rouge">ALTER DATABASE</code> permet de modifier une base de données au sein d’un cluster. Il est par exemple possible de modifier le nom d’une base de données à l’aide de cette commande. En ce qui nous concerne, elle permet en particulier de modifier la valeur des paramètres de configuration pour une base de données spécifique. La nouvelle configuration s’applique aux futures connexions à celle-ci.</p>

<p>Par exemple :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">DATABASE</span> <span class="n">mydb</span> <span class="k">SET</span> <span class="n">work_mem</span><span class="o">=</span><span class="s1">'64MB'</span><span class="p">;</span>
</code></pre></div></div>

<p>La <code class="language-plaintext highlighter-rouge">source</code> dans <code class="language-plaintext highlighter-rouge">pg_settings</code> est alors naturellement “database” :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'work_mem'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]-----
name    | work_mem
setting | 65536
source  | database
</code></pre></div></div>

<h2 id="la-configuration-par-rôle-avec-alter-role">La configuration par rôle avec ALTER ROLE</h2>

<p>Nous n’avons pas encore évoqué la notion de “rôle” dans PostgreSQL. Pour l’heure, nous allons simplement considérer qu’un rôle est un utilisateur du cluster.</p>

<p>Dans ce cadre, <code class="language-plaintext highlighter-rouge">ALTER ROLE</code> permet de modifier un rôle (son nom, son mot de passe ou ses droits par exemple) et en particulier la valeur des paramètres qui lui sont appliqués. La nouvelle configuration s’applique, comme pour <code class="language-plaintext highlighter-rouge">ALTER DATABASE</code>, uniquement aux futures connexions au cluster via ce rôle.</p>

<p>Par exemple :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">ROLE</span> <span class="n">myrole</span> <span class="k">SET</span> <span class="n">work_mem</span><span class="o">=</span><span class="s1">'128MB'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'work_mem'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]-----
name    | work_mem
setting | 131072
source  | user
</code></pre></div></div>

<p>Il est possible de spécifier <code class="language-plaintext highlighter-rouge">ALTER ROLE [...] IN DATABASE [...]</code> pour n’impacter la configuration d’un rôle que dans une base de données spécifique :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">ROLE</span> <span class="n">myrole</span> <span class="k">IN</span> <span class="k">DATABASE</span> <span class="n">mydb</span> <span class="k">SET</span> <span class="n">work_mem</span><span class="o">=</span><span class="s1">'128MB'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'work_mem'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]-----
name    | work_mem
setting | 131072
source  | database user
</code></pre></div></div>

<h2 id="la-configuration-dune-session-avec-set-session">La configuration d’une session avec SET SESSION</h2>

<p>La commande <code class="language-plaintext highlighter-rouge">SET SESSION</code>, ou simplement <code class="language-plaintext highlighter-rouge">SET</code>, affecte le paramétrage pour la session en cours. La nouvelle valeur s’applique immédiatement. Par exemple :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="n">work_mem</span><span class="o">=</span><span class="s1">'32MB'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'work_mem'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]-----
name    | work_mem
setting | 32768
source  | session
</code></pre></div></div>

<p>Il est également possible de définir le paramétrage d’une session en fournissant des options dès la connexion. Par exemple, avec <code class="language-plaintext highlighter-rouge">psql</code> :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>psql <span class="s2">"options='-c work_mem=64MB'"</span>
</code></pre></div></div>

<p>ou encore :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">PGOPTIONS</span><span class="o">=</span><span class="s2">"-c work_mem=64MB"</span>
psql
</code></pre></div></div>

<h2 id="la-configuration-dune-transaction">La configuration d’une transaction</h2>

<p>En dernier lieu, la commande <code class="language-plaintext highlighter-rouge">SET LOCAL</code> peut être utilisée pour modifier la configuration au niveau de la transaction en cours. Le paramétrage disparaît dès que la transaction se termine.</p>

<p>Par exemple :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">BEGIN</span><span class="p">;</span> <span class="c1">-- Début d'une transaction</span>

<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'work_mem'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]-----
name    | work_mem
setting | 4096
source  | session
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SET</span> <span class="k">LOCAL</span> <span class="n">work_mem</span><span class="o">=</span><span class="s1">'32MB'</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'work_mem'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]-----
name    | work_mem
setting | 32768
source  | session
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">END</span><span class="p">;</span> <span class="c1">-- Fin de la transaction, le paramètre revient à sa valeur initiale</span>

<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">setting</span><span class="p">,</span> <span class="k">source</span>
<span class="k">FROM</span> <span class="n">pg_settings</span>
<span class="k">WHERE</span> <span class="n">name</span><span class="o">=</span><span class="s1">'work_mem'</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-[ RECORD 1 ]-----
name    | work_mem
setting | 4096
source  | default
</code></pre></div></div>

<h1 id="contexte-de-modification-du-paramétrage">Contexte de modification du paramétrage</h1>

<p>Bien qu’il soit possible de modifier la configuration de PostgreSQL par plusieurs biais, il faut noter que tous les paramètres ne peuvent pas être modifiés à tous les niveaux.</p>

<p>Par exemple, le paramètre <code class="language-plaintext highlighter-rouge">port</code> ne peut être défini qu’au démarrage d’une instance, et ne peut donc pas être modifié via des commandes comme <code class="language-plaintext highlighter-rouge">SET DATABASE</code> ou <code class="language-plaintext highlighter-rouge">SET LOCAL</code>. Ce comportement s’explique naturellement par le fait que le <code class="language-plaintext highlighter-rouge">port</code> est spécifique à une instance, et non pas à une session ou une base de données.</p>

<p>De plus, concernant les paramètres modifiables au niveau d’une base de données, d’un rôle, d’une session ou d’une transaction, certains ne peuvent l’être que si le rôle effectuant la modification dispose de droits suffisants.</p>

<p>Dans ce cadre, <code class="language-plaintext highlighter-rouge">pg_settings</code> présente un champ <code class="language-plaintext highlighter-rouge">context</code> qui renseigne sur les contraintes et les règles de modification de chaque paramètre. Les valeurs possibles de ce champ sont : “<strong>internal</strong>”, “<strong>postmaster</strong>”, “<strong>sighup</strong>”, “<strong>superuser-backend</strong>”, “<strong>backend</strong>”, “<strong>superuser</strong>”, “<strong>user</strong>”. La signification de ces valeurs est détaillée dans la section “<a href="https://www.postgresql.org/docs/current/view-pg-settings.html">52.24. pg_settings</a>” de la documentation.</p>

<p>Pour compléter la documentation sur deux types de contexte :</p>

<ul>
  <li>“<strong>internal</strong>” : les paramètres de ce type, nommés “<strong>Preset Options</strong>”, ne peuvent pas apparaître directement dans les fichiers de configuration ou être modifiés avec les méthodes listées plus haut. <code class="language-plaintext highlighter-rouge">server_version</code> est un exemple de ce type de paramètres. D’autres paramètres peuvent être modifiés indirectement, comme <code class="language-plaintext highlighter-rouge">data_checksums</code> avec l’utilitaire <code class="language-plaintext highlighter-rouge">pg_checksums</code>.</li>
  <li>
    <p>“<strong>sighup</strong>” : l’envoi du message <code class="language-plaintext highlighter-rouge">SIGHUP</code> à l’instance peut se faire avec <code class="language-plaintext highlighter-rouge">pg_ctl reload</code> ou en exécutant la fonction SQL <code class="language-plaintext highlighter-rouge">pg_reload_conf()</code> :</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">pg_reload_conf</span><span class="p">();</span>
</code></pre></div>    </div>
  </li>
</ul>

<h1 id="ressources-supplémentaires">Ressources supplémentaires</h1>

<p><a href="https://www.postgresql.org/docs/current/config-setting.html">Paramètres de configuration</a><br />
<a href="https://www.postgresql.org/docs/current/view-pg-settings.html">pg_settings</a><br />
<a href="https://www.postgresql.org/docs/current/runtime-config-preset.html">Preset Options</a></p>


        <hr>

        <div class="clearfix">

          
          <a class="btn btn-primary float-left" href="/postgresql/postgresql-101/chapitre-4-renforcer-votre-installation-postgresql.html" data-toggle="tooltip" data-placement="top" title="Chapitre 4 - Renforcer votre installation PostgreSQL">&larr; <span class="d-none d-md-inline">
              Article </span>précédent</a>
          
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:reda.agaoua@gmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/ragaoua">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Reda A. 2025</p>
      </div>
    </div>
  </div>
</footer>

</body>

</html>
